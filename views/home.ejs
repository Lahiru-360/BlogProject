<%-include("partials/header.ejs") %>
    <section class="text-gray-600 body-font overflow-hidden animate-fade-in">
        <%-include("partials/carousel.ejs") %>
        
            <div class="container px-5 py-6 mx-auto">
                <%-include("partials/searchBar.ejs")  %>
                <% if(locals.blogs!=null){%>
                    <% const days=["Sun", "Mon" , "Tue" , "Wed" , "Thurs" , "Fri" , "Sat" ]; %>

                        <% blogs.forEach((blog, index)=> { %>

                                <div class="py-8 flex flex-wrap md:flex-nowrap <%= index !== blogs.length - 1 ? 'border-b border-gray-300 dark:border-gray-700' : '' %>">
                                    <div class="md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col">
                                        <span
                                            class="font-semibold title-font text-gray-700 dark:hover:text-gray-50 dark:text-gray-300">
                                            <%= blog.category %>
                                        </span>
                                        <span
                                            class="mt-1 text-gray-500 text-sm dark:hover:text-gray-50 dark:text-gray-300">
                                            <%= days[blog.published_at.getDay()] %>
                                                <%= blog.published_at.getMonth() %>
                                                    <%= blog.published_at.getFullYear() %>
                                                        <%= blog.published_at.getHours() %>:<%=
                                                                blog.published_at.getMinutes() %>:<%=
                                                                    blog.published_at.getSeconds() %>
                                        </span>
                                    </div>
                                    <div class="md:flex-grow  relative">
                                        <h2
                                            class="text-2xl font-medium text-gray-900 title-font mb-2 dark:hover:text-gray-50 dark:text-gray-300">
                                            <%= blog.blogname %>
                                        </h2>
                                        <p class="leading-relaxed dark:hover:text-gray-50 dark:text-gray-300 break-all">
                                            <%= blog.blogcontent %>
                                        </p>
                                        <a href="/blog/<%= blog.id %>"
                                            class="text-indigo-500 hover:text-indigo-700 inline-flex items-center mt-4 transition duration-300 ease-in-out">Learn
                                            More
                                            <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor"
                                                stroke-width="2" fill="none" stroke-linecap="round"
                                                stroke-linejoin="round">
                                                <path d="M5 12h14"></path>
                                                <path d="M12 5l7 7-7 7"></path>
                                            </svg>
                                        </a>

                                        <p class="absolute right-0 dark:hover:text-gray-50 dark:text-gray-300">Author :
                                            <%= blog.firstname %>
                                                <%= blog.lastname %>
                                        </p>
                                    </div>
                                </div>

                                <%}); %>
                            <% }else{ %>
                                <div class="dark:text-white ">No Blogs Yet</div>
                                <% } %>
            </div>
            <div class="flex justify-center mt-6 space-x-2">
                <% if (currentPage> 1) { %>
                    <a href="/?page=<%= currentPage - 1 %>"
                        class="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition">
                        ← Prev
                    </a>
                    <% } %>
                        <%const setPages = currentPage%5!=0 ?(Math.floor(currentPage/5))*5+1 : (Math.floor(currentPage/5-1))*5+1%>
                        <% const pagelimit = totalPages<setPages+4?totalPages:setPages+4%>
                        <% for (let i=setPages; i <=pagelimit; i++) { %>
                            <a href="/?page=<%= i %>" class="px-3 py-1 rounded border 
             <%= currentPage === i 
                  ? 'bg-indigo-600 text-white border-indigo-600 hover:bg-indigo-500 hover:border-indigo-500' 
                  : 'bg-white text-gray-700 dark:text-white dark:border-gray-700 border-gray-300 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600' 
             %> transition">
                                <%= i %>
                            </a>
                            <% } %>

                                <% if (currentPage < totalPages) { %>
                                    <a href="/?page=<%= currentPage + 1 %>"
                                        class="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition">
                                        Next →
                                    </a>
                                    <% } %>
            </div>

    </section>
    <!-- component -->

    <%-include("partials/footer.ejs") %>